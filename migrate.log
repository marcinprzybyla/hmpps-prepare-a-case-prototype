2023-04-17T13:06:22.482Z
cwd: /Users/richardcooley/Documents/hmpps-prepare-a-case-prototype
package: govuk-prototype-kit@13.0.0
argv: /Users/richardcooley/.nvm/versions/node/v18.16.0/bin/node /Users/richardcooley/.npm/_npx/ab0cb2c39bc0319f/node_modules/.bin/govuk-prototype-kit migrate
Started [Check migration is being applied to a pre v13 prototype]
Succeeded [Check migration is being applied to a pre v13 prototype]
2023-04-17T13:06:33.466Z
cwd: ~/Documents/hmpps-prepare-a-case-prototype
package: govuk-prototype-kit@13.6.0
argv: ~/.nvm/versions/node/v18.16.0/bin/node ~/Documents/hmpps-prepare-a-case-prototype/node_modules/.bin/govuk-prototype-kit migrate -- ~/Documents/hmpps-prepare-a-case-prototype
Started [Migrate config.js to config.json]
Started [Update application SCSS file]
Started [Deleted files that are no longer needed]
Started [Deleted directories that are no longer needed]
Started [Delete listen-on-port.js]
Started [Delete server.js]
Started [Delete start.js]
Started [Delete Procfile]
Started [Delete app/assets/sass/application-ie8.scss]
Started [Delete VERSION.txt]
Started [Remove unused directory docs]
Started [Remove unused directory lib]
Started [Remove unused directory update]
Started [Remove unused directory public]
Succeeded [Migrate config.js to config.json]
Succeeded [Delete server.js]
Succeeded [Delete app/assets/sass/application-ie8.scss]
Succeeded [Delete listen-on-port.js]
Succeeded [Delete start.js]
Succeeded [Delete Procfile]
Succeeded [Delete VERSION.txt]
Succeeded [Deleted files that are no longer needed]
Found [// Add your routes here - above the module.exports line] in [app/routes.js], replacing
Started [Overwrite app/views/layout.html]
Started [Overwrite app/assets/javascripts/application.js]
Started [Overwrite app/filters.js]
Keeping these lines from old file
Could not found [// Add extra styles here, or re-organise the Sass files in whichever way makes most sense to you] in [app/assets/sass/application.scss], aborting
Started [Update app/assets/javascripts/application.js]
Copying from [node_modules/govuk-prototype-kit/prototype-starter/app/filters.js] to [app/filters.js]
Started [Delete app/assets/images/separator.png]
Started [Delete app/assets/images/separator-2x.png]
Started [Delete app/views/includes/cookie-banner.html]
Started [Delete app/views/layout_unbranded.html]
Started [Delete app/assets/javascripts/auto-store-data.js]
Started [Delete app/views/includes/breadcrumb_examples.html]
Started [Delete app/assets/sass/unbranded.scss]
Started [Delete app/assets/sass/patterns/_contents-list.scss]
Started [Delete app/assets/images/unbranded.ico]
Started [Delete app/assets/sass/patterns/_mainstream-guide.scss]
Started [Delete app/assets/sass/patterns/_related-items.scss]
Started [Delete app/assets/sass/patterns/_pagination.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-navigation.scss]
Started [Delete app/assets/sass/patterns/_task-list.scss]
Started [Delete app/assets/javascripts/jquery-1.11.3.js]
Failed [Update application SCSS file]
Failed [Delete app/views/includes/cookie-banner.html]
Failed [Delete app/assets/sass/patterns/_step-by-step-navigation.scss]
Succeeded [Delete app/assets/images/separator.png]
Succeeded [Delete app/views/layout_unbranded.html]
Succeeded [Delete app/assets/images/separator-2x.png]
Succeeded [Delete app/assets/javascripts/auto-store-data.js]
Succeeded [Delete app/assets/sass/unbranded.scss]
Succeeded [Delete app/assets/sass/patterns/_mainstream-guide.scss]
Succeeded [Delete app/assets/images/unbranded.ico]
Succeeded [Delete app/assets/sass/patterns/_related-items.scss]
Succeeded [Delete app/views/includes/breadcrumb_examples.html]
Succeeded [Delete app/assets/sass/patterns/_contents-list.scss]
Started [Delete app/views/includes/head.html]
Started [Delete app/views/includes/scripts.html]
Succeeded [Delete app/assets/javascripts/jquery-1.11.3.js]
Succeeded [Delete app/assets/sass/patterns/_task-list.scss]
Succeeded [Delete app/assets/sass/patterns/_pagination.scss]
Failed [Delete app/views/includes/head.html]
//,// For guidance on how to create routes see:,// https://prototype-kit.service.gov.uk/docs/create-routes,//,,const govukPrototypeKit = require('govuk-prototype-kit'),const router = govukPrototypeKit.requests.setupRouter(),,// Add your routes here,,,router.get('/cases/12/upload_documents_drag_drop', uploadRecallDocuments.get),router.post('/cases/12/upload_documents_drag_drop', uploadRecallDocuments.post),,router.get('/cases/13/summary', (req, res, next) => {,  res.locals.progressNotes = req.session.progressNotes || notesDefaults,  res.locals.comments = req.session.comments || commentsDefaults,  next(),}),,router.post('/cases/13/summary', (req, res, next) => {,  if (!Object.keys(req.body).length) {,    req.session.progressNotes = { ...notesDefaults },    req.session.comments = [].concat(commentsDefaults),    res.locals.progressNotes = req.session.progressNotes,    res.locals.comments = req.session.comments,  } else {,    req.session.progressNotes = {,      ...notesDefaults,,      ...req.session.progressNotes,    },    req.session.comments = (req.session.comments || []).concat(commentsDefaults),    const dateNow = new Date(),    for (let i in req.body) {,      const updateObj = {,        name: 'Mark Berridge',,        date: `${dateNow.getDate()} ${monthNames[dateNow.getMonth()]} ${dateNow.getFullYear()} at ${dateNow.getHours()}:${dateNow.getMinutes()}`,,        text: req.body[i],      },      if (i.includes('progress')) {,        req.session.progressNotes[i].unshift(updateObj),      } else {,        req.session.comments.unshift(updateObj),      },    },  },  next(),}),,module.exports = router,
Succeeded [Update app/assets/javascripts/application.js]
Found [module.exports = router;,module.exports = router] in [app/routes.js], removing
Succeeded [Delete app/views/includes/scripts.html]
Succeeded [Overwrite app/assets/javascripts/application.js]
Succeeded [Remove unused directory lib]
Succeeded [Remove unused directory public]
Succeeded [Update routes file]
Succeeded [Overwrite app/filters.js]
Succeeded [Remove unused directory docs]
Succeeded [Remove unused directory update]
Succeeded [Deleted directories that are no longer needed]
Started [Remove old pattern includes from application SCSS file]
Succeeded [Remove old pattern includes from application SCSS file]
Started [Remove empty directory app/assets/sass/patterns]
Started [Remove empty directory app/assets/images]
Started [Remove empty directory app/views/includes]
Skipped deleting app/assets/images
Skipped deleting app/views/includes
Skipped deleting app/assets/sass/patterns
